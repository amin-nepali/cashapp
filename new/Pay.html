<!DOCTYPE html>
<!-- saved from url=(0070)pay.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f8038">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Cash Mode">
    <link rel="manifest" href="site.webmanifest">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/Cash_App-Logo.wine.png">
    <link rel="apple-touch-icon" href="icons/Cash_App-Logo.wine.png">
    <meta http-equiv="Content-Security-Policy" content="default-src &#39;self&#39;; style-src &#39;self&#39; &#39;unsafe-inline&#39; https://cdnjs.cloudflare.com https://fonts.googleapis.com; font-src &#39;self&#39; https://cdnjs.cloudflare.com https://fonts.gstatic.com; script-src &#39;self&#39; &#39;unsafe-inline&#39;; img-src &#39;self&#39; data:; connect-src &#39;self&#39; http://localhost:5174 https://*.render.com;">
    <script>
      (() => {
        const KEY = "cashAppDarkMode";
        try {
          const on = localStorage.getItem(KEY) === "true";
          if (on) {
            const root = document.documentElement;
            root.setAttribute("data-theme", "dark");
            root.classList.add("dark-boot");
            root.style.backgroundColor = "#000";
          }
        } catch (e) {
          /* silent */
        }
      })();
    </script>
    <style id="theme-boot-inline">
      /* Prevent initial white flash before CSS loads */
      html.dark-boot,
      html.dark-boot body {
        background: #000000 !important;
        color: #ffffff !important;
      }
      html.dark-boot {
        --app-bg: #000000;
        --bg-primary: #000000;
        --bg-secondary: #1a1a1a;
        --text-primary: #ffffff;
        --text-secondary: #cccccc;
        --border-color: #333333;
        --modal-bg: #000000;
        --card-bg: #1a1a1a;
        --button-green: #555555;
      }
    </style>
    <title>Pay - Cash App</title>
    <link rel="stylesheet" href="./Pay - Cash App_files/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <style>
      @font-face {
        font-family: "CashMarket";
        font-style: normal;
        src: url(font/CashSans.ttf);
        font-display: swap;
      }
      @font-face {
        font-family: "CashMarketNav";
        font-style: normal;
        src: url(font/CashSans.ttf);
        font-display: swap;
      }
      :root {
        --header-height: 65px;
        --padding-screen: 18px;
        --footer-height: 70px;
        --accent-green: #47b349;
        --text-on-green: #ffffff;
        --font-family: "CashMarket", -apple-system, BlinkMacSystemFont,
          sans-serif;
        --font-family-nav: "CashMarketNav", -apple-system, BlinkMacSystemFont,
          sans-serif;
        --inactive-alpha: 0.7;
        --text-on-green: #ffffff;
        --button-green: #3c9841;
        --app-bg: #47b349;
        --bg-primary: #ffffff;
        --bg-secondary: #f8f9fa;
        --text-primary: #000000;
        --text-secondary: #666666;
        --border-color: #e0e0e0;
        --modal-bg: #ffffff;
        --card-bg: #ffffff;
        --button-disabled: #3c9841;
        --button-disabled-text: #ffffff;
      }
      body.dark-mode {
        --button-green: #555555;
        --app-bg: #000000;
        --bg-primary: #000000;
        --bg-secondary: #1a1a1a;
        --text-primary: #ffffff;
        --text-secondary: #cccccc;
        --border-color: #333333;
        --modal-bg: #000000;
        --card-bg: #1a1a1a;
        --button-disabled: #555555;
        --button-disabled-text: #ffffff;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }
      html,
      body {
        height: 100%;
        overflow: hidden;
        font-family: "CashMarket", sans-serif;
        touch-action: manipulation;
      }
      body {
        font-family: var(--font-family);
        background-color: var(--app-bg);
        color: var(--text-on-green);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }
      a {
        text-decoration: none;
        color: inherit;
      }
      .faceid-selection-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      .faceid-selection-modal.show {
        display: flex;
        opacity: 1;
      }
      .faceid-selection-content {
        background: var(--card-bg);
        border-radius: 20px;
        padding: 30px 20px;
        max-width: 320px;
        width: 90%;
        text-align: center;
      }
      .faceid-selection-title {
        font-size: 22px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 10px;
      }
      .faceid-selection-subtitle {
        font-size: 14px;
        color: var(--text-secondary);
        margin-bottom: 30px;
      }
      .faceid-option {
        background: var(--bg-secondary);
        border: 2px solid var(--border-color);
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 15px;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .faceid-option:hover {
        background: var(--bg-primary);
        border-color: var(--accent-green);
      }
      .faceid-option:active {
        transform: scale(0.98);
      }
      .faceid-option-icon {
        font-size: 40px;
        margin-bottom: 10px;
      }
      .faceid-option-name {
        font-size: 18px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 5px;
      }
      .faceid-option-desc {
        font-size: 13px;
        color: var(--text-secondary);
      }
      .faceid-cancel-btn {
        background: transparent;
        border: none;
        color: #666;
        font-size: 16px;
        padding: 15px;
        cursor: pointer;
        margin-top: 10px;
      }
      .faceid-register-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(252, 251, 252, 0.98);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      .faceid-register-modal.show {
        display: flex;
        opacity: 1;
      }
      .faceid-register-content {
        text-align: center;
      }
      .faceid-register-video-wrapper {
        width: 220px;
        height: 220px;
        border-radius: 32px;
        overflow: hidden;
        background: rgba(0, 0, 0, 0.05);
        margin: 0 auto 24px;
      }
      .faceid-register-video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 32px;
      }
      .faceid-register-text {
        color: var(--text-primary);
        font-size: 24px;
        font-weight: 700;
      }
      .keypad-btn .fa-circle {
        font-size: 0.3rem;
        vertical-align: middle;
        color: white;
      }
      .keypad-btn svg {
        vertical-align: middle;
        width: 1.2rem;
        height: 1.2rem;
      }
      .pay-app-container {
        max-width: 450px;
        width: 100%;
        height: 100%;
        margin: 0 auto;
        display: grid;
        grid-template-rows: auto 1fr auto;
        position: relative;
      }

      /* Header */
      .pay-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px var(--padding-screen);
        height: var(--header-height);
        flex-shrink: 0;
      }
      .header-icon {
        font-size: 26px;
      }
      .profile-icon-link {
        display: block;
        width: 36px;
        height: 36px;
      }
      .profile-icon {
        font-size: 16px;
        color: var(--text-on-green);
        width: 100%;
        height: 100%;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        object-fit: cover;
      }

      /* Main Content */
      .pay-main {
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        overflow: hidden;
      }

      /* Amount Display */
      .amount-display {
        flex-grow: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 1rem var(--padding-screen);
        font-variant-numeric: tabular-nums;
      }

      /* --- NEW: SHAKE ANIMATION --- */
      @keyframes shake {
        10%,
        90% {
          transform: translateX(-6px);
        }
        20%,
        80% {
          transform: translateX(6px);
        }
        30%,
        50%,
        70% {
          transform: translateX(-4px);
        }
        40%,
        60% {
          transform: translateX(4px);
        }
      }
      .shake {
        animation: shake 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
      }
      /* --- END OF NEW CSS --- */

      .amount-text {
        font-size: clamp(80px, 22vw, 120px);
        font-weight: 900;
        line-height: 1.1;
        white-space: nowrap;
      }
      .amount-text .cursor {
        display: none;
      }

      /* Keypad */
      .keypad-wrapper {
        padding: 0 var(--padding-screen);
        padding-bottom: 1rem;
        flex-shrink: 0;
      }
      .pay-keypad {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1vh 23px;
        touch-action: manipulation;
      }
      .keypad-btn {
        background: none;
        border: none;
        color: var(--text-on-green);
        font-size: 1.3rem;
        font-weight: 600;
        padding: 15px 6px;
        cursor: pointer;
        transition: background-color 0.15s ease;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 30px;
        font-family: var(--font-family);
        touch-action: manipulation;
        user-select: none;
        -webkit-user-select: none;
      }
      .keypad-btn:active {
        background-color: rgba(255, 255, 255, 0.2);
        transform: none;
      }

      /* Action Buttons */
      .pay-actions {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        margin-bottom: -16px;
        margin-top: 1.5rem;
      }
      .action-btn {
        font-family: var(--font-family);
        background-color: var(--button-green);
        color: #ffffff;
        border: none;
        border-radius: 28px;
        padding: 12px;
        font-size: 17px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        margin-bottom: 1px;
      }
      .action-btn:disabled {
        background-color: var(--button-disabled);
        color: var(--button-disabled-text);
        opacity: 0.85;
        cursor: default;
      }
      .action-btn:not(:disabled):active {
        background-color: #666666;
        transform: scale(0.98);
      }

      /* Footer */
      .bottom-nav {
        display: flex;
        justify-content: space-around;
        align-items: center;
        height: var(--footer-height);
        padding: 0 18px;
      }
      .nav-button {
        background: none;
        border: none;
        cursor: pointer;
        padding: 0 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: inherit;
        font-weight: 600;
        color: rgba(255, 255, 255, 0.7);
        min-width: 44px;
      }
      .nav-button svg {
        fill: rgba(255, 255, 255, 0.7);
      }
      .nav-button.active {
        color: var(--text-on-green);
      }
      .nav-button.active svg {
        fill: var(--text-on-green);
      }
      .nav-button.disabled,
      .nav-button:disabled {
        cursor: default;
        opacity: 0.45;
        pointer-events: none;
      }
      .nav-button.disabled svg,
      .nav-button:disabled svg {
        fill: rgba(255, 255, 255, 0.45);
      }
      #nav-balance-display {
        font-size: 16px;
        font-family: var(--font-family-nav);
      }

      .hidden {
        display: none !important;
      }

      .app-shell.hidden {
        display: none;
      }

      .session-info {
        margin-left: auto;
        margin-right: 6px;
        display: flex;
        align-items: center;
        gap: 6px;
        flex-wrap: wrap;
        justify-content: flex-end;
        text-align: right;
      }

      .session-username {
        font-size: 12px;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        opacity: 0.75;
      }

      .session-badge {
        background-color: rgba(0, 0, 0, 0.25);
        padding: 4px 12px;
        border-radius: 999px;
        font-size: 12px;
        font-weight: 600;
      }

      .session-chip {
        border: 1px solid rgba(255, 255, 255, 0.35);
        background: rgba(0, 0, 0, 0.15);
        color: var(--text-on-green);
        border-radius: 999px;
        padding: 4px 12px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s ease, transform 0.2s ease;
      }

      .session-chip:disabled {
        opacity: 0.4;
        cursor: default;
      }

      .session-chip:not(:disabled):active {
        transform: scale(0.98);
      }

      /* Time Left Popup Notification */
      .time-popup {
        position: fixed;
        top: 20px;
        left: 20px;
        background: rgba(0, 0, 0, 0.85);
        backdrop-filter: blur(10px);
        color: white;
        padding: 12px 16px;
        border-radius: 12px;
        font-size: 14px;
        font-weight: 600;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        z-index: 3000;
        cursor: pointer;
        transition: all 0.3s ease;
        animation: slideIn 0.4s ease;
        max-width: 280px;
      }

      .time-popup:hover {
        background: rgba(0, 0, 0, 0.95);
        transform: translateY(-2px);
      }

      .time-popup.hidden {
        display: none;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-100px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .time-popup-close {
        margin-left: 12px;
        opacity: 0.7;
        font-size: 12px;
      }

      .login-screen {
        position: fixed;
        inset: 0;
        background: #051706;
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
        z-index: 2000;
      }

      .login-screen.hidden {
        display: none;
      }

      .login-card {
        position: relative;
        width: 100%;
        max-width: 380px;
        background: var(--card-bg);
        color: var(--text-primary);
        border-radius: 20px;
        padding: 32px;
        box-shadow: 0 30px 65px rgba(0, 0, 0, 0.45);
      }

      .login-card h1 {
        font-size: 26px;
        margin-bottom: 6px;
        color: var(--text-primary);
      }

      .login-card p {
        margin-bottom: 16px;
        color: var(--text-secondary);
      }

      .login-card label {
        display: block;
        font-size: 13px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 6px;
      }

      .login-card input {
        width: 100%;
        padding: 12px;
        border-radius: 12px;
        border: 1px solid #cbd5f5;
        margin-bottom: 16px;
        font-size: 15px;
      }

      .login-card button[type="submit"] {
        width: 100%;
        padding: 12px;
        border-radius: 14px;
        border: none;
        background: #0f8038;
        color: white;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        margin-top: 8px;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .login-card button[type="submit"]:disabled {
        opacity: 0.6;
        cursor: progress;
      }

      .login-error {
        color: #b91c1c;
        font-size: 13px;
        margin-top: 8px;
      }

      .login-attempts {
        font-size: 12px;
        color: #b45309;
        margin-top: 4px;
      }

      .login-footnote {
        margin-top: 20px;
        font-size: 12px;
        color: #64748b;
        text-align: center;
      }

      .login-settings-btn {
        position: absolute;
        top: 16px;
        right: 16px;
        background: none;
        border: none;
        color: #0f8038;
        font-size: 20px;
        cursor: pointer;
        width: 34px;
        height: 34px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: background 0.2s ease;
      }

      .login-settings-btn:hover {
        background: rgba(15, 128, 56, 0.12);
      }

      .settings-modal {
        position: fixed;
        inset: 0;
        background: rgba(5, 23, 6, 0.85);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        display: none;
        align-items: flex-start;
        justify-content: center;
        padding: 24px 16px;
        overflow-y: auto;
        z-index: 3000;
      }

      .settings-modal.show {
        display: flex;
      }

      .settings-card {
        width: 100%;
        max-width: 380px;
        background: var(--card-bg);
        color: var(--text-primary);
        border-radius: 20px;
        padding: 32px;
        box-shadow: 0 30px 65px rgba(0, 0, 0, 0.45);
        max-height: calc(100vh - 48px);
        overflow-y: auto;
        overscroll-behavior: contain;
      }

      .settings-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 24px;
      }

      .settings-header h2 {
        font-size: 22px;
        margin: 0;
        color: var(--text-primary);
      }

      .settings-close-btn {
        background: none;
        border: none;
        font-size: 28px;
        color: #94a3b8;
        cursor: pointer;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .settings-section {
        margin-bottom: 24px;
      }

      .settings-section h3 {
        font-size: 15px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 8px;
      }

      .settings-section p {
        font-size: 13px;
        color: var(--text-secondary);
        margin-bottom: 12px;
      }

      .settings-radio-group {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .settings-radio-option {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        padding: 12px;
        border: 1px solid var(--border-color);
        border-radius: 12px;
        cursor: pointer;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }

      .settings-radio-option input {
        margin-top: 4px;
      }

      .settings-radio-option span {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .settings-radio-option strong {
        font-size: 14px;
        color: var(--text-primary);
      }

      .settings-radio-option small {
        font-size: 12px;
        color: var(--text-secondary);
        line-height: 1.4;
      }

      .settings-radio-option:focus-within,
      .settings-radio-option:hover {
        border-color: #0f8038;
        box-shadow: 0 0 0 2px rgba(15, 128, 56, 0.12);
      }

      .settings-input-group {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .settings-input-group span {
        font-size: 18px;
        font-weight: 600;
        color: var(--text-primary);
      }

      .settings-input-group input {
        flex: 1;
        padding: 12px;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        background: var(--bg-primary);
        color: var(--text-primary);
        font-size: 15px;
      }

      .settings-save-btn {
        width: 100%;
        padding: 12px;
        border-radius: 14px;
        border: none;
        background: var(--accent-green);
        color: white;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .settings-save-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 14px rgba(15, 128, 56, 0.35);
      }

      .settings-note {
        font-size: 12px;
        color: var(--text-secondary);
        margin-top: 12px;
        text-align: center;
      }

      .admin-panel {
        position: fixed;
        inset: 0;
        background: rgba(7, 7, 7, 0.8);
        display: none;
        align-items: flex-start;
        justify-content: center;
        padding: 32px 16px;
        z-index: 2100;
        overflow-y: auto;
      }

      .admin-panel.active {
        display: flex;
      }

      .admin-card {
        width: 100%;
        max-width: 960px;
        background: var(--bg-secondary);
        border-radius: 24px;
        padding: 28px;
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.35);
        color: var(--text-primary);
      }

      .admin-heading {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 16px;
        margin-bottom: 24px;
      }

      .admin-heading h2 {
        font-size: 26px;
        margin: 4px 0 0;
      }

      .admin-label {
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: #94a3b8;
        font-weight: 700;
      }

      .admin-heading-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: flex-end;
      }

      .admin-stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 12px;
        margin-bottom: 20px;
      }

      .admin-stat-card {
        background: #fff;
        border-radius: 18px;
        padding: 16px;
        box-shadow: inset 0 0 0 1px #e2e8f0;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .stat-label {
        font-size: 12px;
        font-weight: 600;
        color: #64748b;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }

      .stat-value {
        font-size: 28px;
        font-weight: 700;
        color: var(--text-primary);
      }

      .stat-pill {
        display: inline-flex;
        align-items: center;
        width: fit-content;
        border-radius: 999px;
        font-size: 12px;
        font-weight: 600;
        padding: 4px 10px;
      }

      .stat-pill.soft {
        background: rgba(15, 128, 56, 0.1);
        color: #0f8038;
      }

      .stat-pill.success {
        background: rgba(37, 99, 235, 0.12);
        color: #2563eb;
      }

      .stat-pill.muted {
        background: rgba(148, 163, 184, 0.2);
        color: #475569;
      }

      .stat-pill.warning {
        background: rgba(234, 88, 12, 0.15);
        color: #ea580c;
      }

      .admin-section {
        background: var(--card-bg);
        border-radius: 18px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: inset 0 0 0 1px var(--border-color);
      }

      .admin-section h3 {
        margin-bottom: 4px;
        font-size: 20px;
      }

      .section-heading {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 12px;
        margin-bottom: 16px;
      }

      .section-note {
        font-size: 13px;
        color: #64748b;
        max-width: 360px;
      }

      .section-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .admin-form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 12px;
      }

      .admin-form-grid input,
      .admin-form-grid select {
        width: 100%;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid #cbd5f5;
        font-size: 14px;
      }

      .form-footer {
        margin-top: 16px;
        display: flex;
        justify-content: flex-end;
      }

      .pill-button {
        background: #0f8038;
        color: white;
        border: none;
        border-radius: 999px;
        padding: 10px 20px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease;
      }

      .pill-button.secondary {
        background: #334155;
      }

      .pill-button.danger {
        background: #b91c1c;
      }

      .pill-button:active {
        transform: scale(0.97);
      }

      .users-list-wrapper {
        max-height: 55vh;
        overflow-y: auto;
      }

      .users-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .empty-state-card {
        background: #f8fafc;
        border-radius: 16px;
        padding: 24px;
        text-align: center;
        color: #94a3b8;
        font-size: 14px;
        border: 1px dashed #cbd5f5;
        margin-top: 12px;
      }

      .user-row {
        background: var(--card-bg);
        border-radius: 18px;
        padding: 16px;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: flex-start;
        gap: 12px;
        box-shadow: inset 0 0 0 1px var(--border-color);
      }

      .user-meta {
        font-size: 13px;
        color: #475569;
        margin-top: 6px;
        line-height: 1.4;
      }

      .user-tags {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
        margin-top: 6px;
      }

      .user-tag {
        font-size: 12px;
        font-weight: 600;
        border-radius: 999px;
        padding: 4px 10px;
      }

      .user-tag.active {
        background: rgba(34, 197, 94, 0.15);
        color: #15803d;
      }

      .user-tag.pending {
        background: rgba(59, 130, 246, 0.12);
        color: #1d4ed8;
      }

      .user-tag.expiring {
        background: rgba(234, 88, 12, 0.15);
        color: #c2410c;
      }

      .user-actions {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .user-actions button {
        border: none;
        border-radius: 999px;
        padding: 6px 12px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
      }

      .user-actions .add-day {
        background: #16a34a;
        color: white;
      }

      .user-actions .remove-day {
        background: #f97316;
        color: white;
      }

      .user-actions .edit-pass {
        background: #2563eb;
        color: white;
      }

      .user-actions .delete-user {
        background: #dc2626;
        color: white;
      }

      .admin-toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        align-items: center;
        margin-bottom: 16px;
      }

      .admin-toolbar input {
        flex: 1;
        min-width: 180px;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid #cbd5f5;
      }

      @media (max-width: 600px) {
        .admin-card {
          padding: 18px;
        }

        .admin-form-grid {
          grid-template-columns: 1fr;
        }

        .session-info {
          flex-direction: column;
          align-items: flex-end;
        }

        .admin-heading {
          flex-direction: column;
          align-items: flex-start;
        }

        .admin-heading-actions {
          justify-content: flex-start;
        }
      }
    </style>
    <script src="./Pay - Cash App_files/dark-mode.js.download"></script>
  </head>
  <body>
    <!-- Time Left Popup Notification -->
    <div id="timePopup" class="time-popup hidden">
      <span id="timePopupText">Time remaining: 29d 14h</span>
      <span class="time-popup-close">âœ•</span>
    </div>

    <div id="loginScreen" class="login-screen hidden">
      <div class="login-card">
        <button class="login-settings-btn" id="loginSettingsBtn" title="Settings">
          <i class="fa-solid fa-gear"></i>
        </button>
        <h1>Secure Access</h1>
        <p>Enter your assigned credentials to unlock Cash mode. Time starts immediately after you log in.</p>
        <form id="loginForm">
          <label for="loginUsername">Username</label>
          <input type="text" id="loginUsername" placeholder="username" autocomplete="username" required="">

          <label for="loginPassword">Password</label>
          <div style="position: relative; margin-bottom: 15px;">
            <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" required="" style="padding-right: 45px; margin-bottom: 0;">
            <button type="button" class="password-toggle" data-target="loginPassword" aria-label="Show password" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: transparent; border: none; padding: 4px; cursor: pointer; z-index: 10; display: flex; align-items: center; justify-content: center;">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width: 20px; height: 20px; color: #6b7280;">
                <path data-eye-open="" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                <path data-eye-open="" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                <path data-eye-closed="" style="display: none;" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path>
              </svg>
            </button>
          </div>

          <button type="submit" id="loginButton">Log in</button>
        </form>
        <p id="loginError" class="login-error hidden"></p>
        <div id="loginAttempts" class="login-attempts hidden">
          Attempts used: <span id="attemptValue">0</span>/5
        </div>
        <p class="login-footnote">1 account = 1 device. Contact your admin if you need help.</p>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="settings-modal">
      <div class="settings-card">
        <div class="settings-header">
          <h2>Settings</h2>
          <button class="settings-close-btn" id="settingsCloseBtn">Ã—</button>
        </div>
        <div class="settings-section">
          <h3>Cash Balance Display</h3>
          <p>Customize the cash balance shown on the home page</p>
          <div class="settings-input-group">
            <span>$</span>
            <input type="number" id="customBalanceInput" placeholder="100000000" min="0" step="0.01">
          </div>
        </div>
        <div class="settings-section">
          <h3>Contact Search Mode</h3>
          <p>Choose how the Pay screen searches when you start typing a name.</p>
          <div class="settings-radio-group" id="searchModeGroup">
            <label class="settings-radio-option">
              <input type="radio" name="searchMode" value="cash">
              <span>
                <strong>$Cashtag only</strong>
                <small>Use your saved contacts and Cash App handles.</small>
              </span>
            </label>
            <label class="settings-radio-option">
              <input type="radio" name="searchMode" value="tiktok">
              <span>
                <strong>@TikTok tag only</strong>
                <small>Pull live profile data from TikTok when you type @handles.</small>
              </span>
            </label>
            <label class="settings-radio-option">
              <input type="radio" name="searchMode" value="both">
              <span>
                <strong>Show both</strong>
                <small>Use @ for TikTok or $/name for Cash App contacts.</small>
              </span>
            </label>
          </div>
        </div>
        <div class="settings-section">
          <h3>Face ID Payment Authentication</h3>
          <p>Use your device's Face ID or Touch ID to verify payments (iPhone/iPad only).</p>
          <label class="settings-radio-option" style="cursor: pointer;">
            <input type="checkbox" id="faceIdToggleSettings" style="width: auto; margin-top: 2px;">
            <span>
              <strong>Enable Face ID for Payments</strong>
              <small>When enabled, you'll use native Face ID instead of video animation when making payments.</small>
            </span>
          </label>
          <div id="faceIdStatusSettings" style="margin-top: 12px; padding: 10px; border-radius: 8px; font-size: 13px; display: none;"></div>
        </div>
        <div class="settings-section">
          <h3>Dark Mode</h3>
          <p>Switch between light and dark theme</p>
          <label class="settings-radio-option" style="cursor: pointer;">
            <input type="checkbox" id="darkModeToggle" style="width: auto; margin-top: 2px;">
            <span>
              <strong>Enable Dark Mode</strong>
              <small>Changes the app appearance to a dark theme</small>
            </span>
          </label>
        </div>
        <div class="settings-section">
          <h3>Success Screen Note</h3>
          <p>Customize the line under the recipient on the final confirmation page.</p>
          <input type="text" id="successNoteInput" placeholder="Payment arrives within 72 hours." style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 10px; font-size: 14px;">
        </div>
        <button class="settings-save-btn" id="settingsSaveBtn">Save Settings</button>
        <p class="settings-note">Changes will apply to the home page balance display</p>
      </div>
    </div>

    <!-- Face ID Selection Modal -->
    <div id="faceIdSelectionModal" class="faceid-selection-modal">
      <div class="faceid-selection-content">
        <h2 class="faceid-selection-title">Choose Face ID Style</h2>
        <p class="faceid-selection-subtitle">Select your preferred Face ID animation</p>
        
        <div class="faceid-option" data-type="iphone13">
          <div class="faceid-option-icon">ðŸ“±</div>
          <div class="faceid-option-name">Face ID 13</div>
          <div class="faceid-option-desc">Classic centered animation</div>
        </div>
        
        <div class="faceid-option" data-type="iphone17">
          <div class="faceid-option-icon">ðŸ”’</div>
          <div class="faceid-option-name">Face ID iPhone 17</div>
          <div class="faceid-option-desc">Dynamic Island capsule style</div>
        </div>
        
        <button class="faceid-cancel-btn" id="faceIdSelectionCancelPay">Cancel</button>
      </div>
    </div>

    <!-- Face ID Registration Modal -->
    <div id="faceIdRegisterModal" class="faceid-register-modal">
      <div class="faceid-register-content">
        <div class="faceid-register-video-wrapper">
          <video id="faceIdRegisterVideo" class="faceid-register-video" src="icons/faceIDvideo.mp4" playsinline="" muted="" loop=""></video>
        </div>
        <p class="faceid-register-text">Setting up Face ID...</p>
      </div>
    </div>

    <div class="pay-app-container">
      <header class="pay-header">
        <i class="fa-solid fa-qrcode header-icon"></i>
        <a href="profile.html" class="profile-icon-link"><img src="./Pay - Cash App_files/pfpwhite.png" alt="Profile" class="profile-icon"></a>
      </header>

      <main class="pay-main">
        <div class="amount-display" id="amount-display">
          <!-- GAVE THIS AN ID FOR EASIER SELECTION -->
          <h1 class="amount-text" id="amount-text">$0</h1>
        </div>

        <div class="keypad-wrapper">
          <div class="pay-keypad" id="pay-keypad">
            <button class="keypad-btn" data-key="1">1</button>
            <button class="keypad-btn" data-key="2">2</button>
            <button class="keypad-btn" data-key="3">3</button>
            <button class="keypad-btn" data-key="4">4</button>
            <button class="keypad-btn" data-key="5">5</button>
            <button class="keypad-btn" data-key="6">6</button>
            <button class="keypad-btn" data-key="7">7</button>
            <button class="keypad-btn" data-key="8">8</button>
            <button class="keypad-btn" data-key="9">9</button>
            <button class="keypad-btn" data-key=".">
              <i class="fas fa-circle"></i>
            </button>
            <button class="keypad-btn" data-key="0">0</button>
            <button class="keypad-btn" data-key="&lt;">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3.5" stroke-linecap="square" stroke-linejoin="miter">
                <path d="M15 18L9 12L15 6"></path>
              </svg>
            </button>
          </div>

          <div class="pay-actions">
            <button class="action-btn" id="request-btn" disabled="">
              Request
            </button>
            <button class="action-btn" id="pay-btn" disabled="">Pay</button>
          </div>
        </div>
      </main>

      <nav class="bottom-nav">
        <a href="home.html">
          <button class="nav-button" id="nav-balance-display" aria-label="Home">$53K</button>
        </a>
        <a href="card.html">
          <button class="nav-button" aria-label="Cards">
            <svg width="22" height="18" viewBox="0 0 24 21">
              <path transform="translate(-126.25 -18)" fill-rule="evenodd" clip-rule="evenodd" d="M131.25 21H145.25C146.355 21 147.25 21.8954 147.25 23V33C147.25 34.1046 146.355 35 145.25 35H131.25C130.145 35 129.25 34.1046 129.25 33V23C129.25 21.8954 130.145 21 131.25 21ZM126.25 23C126.25 20.2386 128.489 18 131.25 18H145.25C148.011 18 150.25 20.2386 150.25 23V33C150.25 35.7614 148.011 38 145.25 38H131.25C128.489 38 126.25 35.7614 126.25 33V23ZM134.25 24C133.145 24 132.25 24.8954 132.25 26C132.25 27.1046 133.145 28 134.25 28H135.25C136.355 28 137.25 27.1046 137.25 26C137.25 24.8954 136.355 24 135.25 24H134.25Z"></path>
            </svg>
          </button>
        </a>
        <a href="pay.html#">
          <button class="nav-button active" aria-label="Pay">
            <svg width="14" height="20" viewBox="0 0 15 23">
              <path transform="translate(-205 -17)" d="M217.675 23.8903C217.923 24.1401 218.336 24.1401 218.569 23.8903L219.811 22.5912C220.075 22.3414 220.06 21.8917 219.782 21.6218C218.805 20.7669 217.671 20.1148 216.442 19.7032L216.835 17.8045C216.919 17.3897 216.611 17 216.199 17H213.794C213.643 17.0016 213.498 17.0551 213.382 17.1515C213.267 17.2479 213.187 17.3814 213.158 17.5296L212.81 19.2185C209.61 19.3834 206.897 21.0173 206.897 24.365C206.897 27.263 209.138 28.5071 211.508 29.3616C213.749 30.221 214.937 30.5408 214.937 31.7499C214.937 32.9941 213.754 33.7236 212.005 33.7236C210.415 33.7236 208.745 33.189 207.453 31.8848C207.393 31.8244 207.322 31.7765 207.243 31.7438C207.165 31.7111 207.081 31.6942 206.996 31.6942C206.911 31.6942 206.827 31.7111 206.748 31.7438C206.67 31.7765 206.599 31.8244 206.539 31.8848L205.197 33.2339C205.071 33.3613 205 33.5338 205 33.7136C205 33.8934 205.071 34.0659 205.197 34.1933C206.241 35.2276 207.562 35.9771 209.069 36.3918L208.701 38.1756C208.617 38.5903 208.92 38.975 209.332 38.98L211.743 39C211.895 39.0007 212.042 38.9482 212.16 38.8516C212.278 38.755 212.359 38.6202 212.388 38.4704L212.736 36.7765C216.586 36.5167 218.932 34.3831 218.932 31.2703C218.932 28.4022 216.596 27.193 213.764 26.2087C212.144 25.6041 210.743 25.1894 210.743 23.9453C210.743 22.7361 212.05 22.2564 213.361 22.2564C215.031 22.2564 216.636 22.9509 217.685 23.9003L217.675 23.8903Z"></path>
            </svg>
          </button>
        </a>
        <button class="nav-button disabled" aria-label="Search">
          <svg width="21" height="21" viewBox="0 0 23 24">
            <path transform="translate(-276.25 -16.5)" fill-rule="evenodd" clip-rule="evenodd" d="M291.75 26.5C291.75 30.0899 288.84 33 285.25 33C281.66 33 278.75 30.0899 278.75 26.5C278.75 22.9101 281.66 20 285.25 20C288.84 20 291.75 22.9101 291.75 26.5ZM290.823 34.1944C289.258 35.3302 287.332 36 285.25 36C280.003 36 275.75 31.7467 275.75 26.5C275.75 21.2533 280.003 17 285.25 17C290.497 17 294.75 21.2533 294.75 26.5C294.75 28.582 294.08 30.5076 292.944 32.0731L297.882 37.0104C298.468 37.5962 298.468 38.546 297.882 39.1317C297.296 39.7175 296.346 39.7175 295.76 39.1317L290.823 34.1944Z"></path>
          </svg>
        </button>
        <a href="activty.html">
          <button class="nav-button" aria-label="Activity">
            <svg width="22" height="22" viewBox="0 0 24 25">
              <path transform="translate(-349 -16)" fill-rule="evenodd" clip-rule="evenodd" d="M370 28C370 32.9706 365.971 37 361 37C356.029 37 352 32.9706 352 28C352 23.0294 356.029 19 361 19C365.971 19 370 23.0294 370 28ZM373 28C373 34.6274 367.627 40 361 40C354.373 40 349 34.6274 349 28C349 21.3726 354.373 16 361 16C367.627 16 373 21.3726 373 28ZM362.5 24C362.5 23.1716 361.828 22.5 361 22.5C360.172 22.5 359.5 23.1716 359.5 24V27.4893C359.5 28.4591 360.061 29.3414 360.939 29.753L364.363 31.3582C365.113 31.7098 366.007 31.3868 366.358 30.6367C366.71 29.8865 366.387 28.9934 365.637 28.6418L362.5 27.1715V24Z"></path>
            </svg>
          </button>
        </a>
      </nav>
    </div>

    <!-- Hidden Login & Admin System -->
    <div id="appShell" class="app-shell"></div>
    <div id="adminPanel" class="admin-panel" aria-hidden="true">
      <div class="admin-card">
        <div class="admin-heading">
          <div>
            <p class="admin-label">Control Center</p>
            <h2>Admin Panel</h2>
          </div>
          <div class="admin-heading-actions">
            <button class="pill-button secondary" type="button" id="refreshCustomersBtn">Refresh</button>
            <button class="pill-button secondary" type="button" id="closeAdminBtn">Close</button>
          </div>
        </div>

        <div class="admin-stats-grid">
          <div class="admin-stat-card">
            <p class="stat-label">Total users</p>
            <p class="stat-value" id="totalUsersStat">0</p>
            <span class="stat-pill soft">All plans</span>
          </div>
          <div class="admin-stat-card">
            <p class="stat-label">Active now</p>
            <p class="stat-value" id="activeUsersStat">0</p>
            <span class="stat-pill success">Countdown running</span>
          </div>
          <div class="admin-stat-card">
            <p class="stat-label">Waiting</p>
            <p class="stat-value" id="waitingUsersStat">0</p>
            <span class="stat-pill muted">Pending login</span>
          </div>
          <div class="admin-stat-card">
            <p class="stat-label">Expiring soon</p>
            <p class="stat-value" id="expiringUsersStat">0</p>
            <span class="stat-pill warning">Under 6h</span>
          </div>
        </div>

        <section class="admin-section">
          <div class="section-heading">
            <div>
              <p class="admin-label">New pass</p>
              <h3>Create customer</h3>
            </div>
            <p class="section-note">Set the pass length exactly like the TikTok dashboard.</p>
          </div>
          <form id="createUserForm">
            <div class="admin-form-grid">
              <div>
                <label for="newUsername">Username</label>
                <input type="text" id="newUsername" placeholder="new username" required="">
              </div>
              <div>
                <label for="newPassword">Password</label>
                <div style="position: relative;">
                  <input type="password" id="newPassword" placeholder="temporary password" minlength="6" required="" style="padding-right: 45px;">
                  <button type="button" class="password-toggle" data-target="newPassword" aria-label="Show password" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: transparent; border: none; padding: 4px; cursor: pointer; z-index: 10; display: flex; align-items: center; justify-content: center;">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width: 20px; height: 20px; color: #6b7280;">
                      <path data-eye-open="" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                      <path data-eye-open="" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                      <path data-eye-closed="" style="display: none;" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path>
                    </svg>
                  </button>
                </div>
              </div>
              <div>
                <label for="userDuration">Duration</label>
                <select id="userDuration">
                  <option value="30">30 minutes (test)</option>
                  <option value="60">1 hour</option>
                  <option value="120">2 hours</option>
                  <option value="1440">1 day</option>
                  <option value="10080">1 week</option>
                  <option value="43200">1 month (30 days)</option>
                  <option value="129600">3 months</option>
                  <option value="259200">6 months</option>
                  <option value="525600">1 year</option>
                </select>
              </div>
            </div>
            <div class="form-footer">
              <button class="pill-button" type="submit">Save customer</button>
            </div>
          </form>
        </section>

        <section class="admin-section">
          <div class="section-heading">
            <div>
              <p class="admin-label">Customers</p>
              <h3>Live sessions</h3>
            </div>
            <div class="section-actions">
              <button class="pill-button danger" type="button" id="deleteExpiredBtn">Delete expired</button>
            </div>
          </div>
          <div class="admin-toolbar">
            <input type="text" id="adminSearchInput" placeholder="Search username">
          </div>
          <div class="users-list-wrapper">
            <div id="usersList" class="users-list"></div>
            <div id="adminEmptyState" class="empty-state-card" style="display:none;" data-default-text="No customers yet. Create your first user above.">
              <p>No customers yet. Create your first user above.</p>
            </div>
          </div>
        </section>
      </div>
    </div>

    

    <script>
      // Pay Page Main Functionality
      const amountText = document.getElementById("amount-text");
      const keypad = document.getElementById("pay-keypad");
      const requestBtn = document.getElementById("request-btn");
      const payBtn = document.getElementById("pay-btn");
      const profileIconLink = document.querySelector(".profile-icon-link");
      const amountDisplay = document.getElementById("amount-display");
      const MAX_AMOUNT = 99999;

      const userProfileKey = "cashAppUserProfile";
      const defaultProfile = { profilePic: "" };

      let amountValue = "0";

      function updateDisplay() {
        if (amountValue === "0") {
          amountText.innerHTML = "$0";
        } else {
          const parts = amountValue.split(".");
          const integerPartString = parts[0].replace(/,/g, "");
          const integerPart =
            parseFloat(integerPartString).toLocaleString("en-US");
          amountText.innerHTML =
            parts.length > 1
              ? `$${integerPart}.${parts[1]}`
              : `$${integerPart}`;
        }

        const parent = amountText.parentElement;
        const maxTextWidth = parent.clientWidth * 0.9;
        amountText.style.fontSize = "";
        if (amountText.scrollWidth > maxTextWidth) {
          let currentFontSize = parseFloat(
            window.getComputedStyle(amountText).fontSize
          );
          while (
            amountText.scrollWidth > maxTextWidth &&
            currentFontSize > 10
          ) {
            currentFontSize--;
            amountText.style.fontSize = `${currentFontSize}px`;
          }
        }

        const numericValue = parseFloat(amountValue);
        const isEnabled = numericValue > 0;
        requestBtn.disabled = !isEnabled;
        payBtn.disabled = !isEnabled;
      }

      function triggerLimitError() {
        if (navigator.vibrate) {
          navigator.vibrate(150);
        }
        amountDisplay.classList.add("shake");
        setTimeout(() => {
          amountDisplay.classList.remove("shake");
        }, 400);
      }

      function handleKeyPress(key) {
        const previousAmount = amountValue;

        if (key === "<") {
          amountValue = amountValue.length > 1 ? amountValue.slice(0, -1) : "0";
        } else if (key === ".") {
          if (!amountValue.includes(".")) {
            amountValue += ".";
          }
        } else {
          const decimalPart = amountValue.split(".")[1];
          if (decimalPart && decimalPart.length >= 2) return;

          if (amountValue === "0" && key !== ".") {
            amountValue = key;
          } else {
            amountValue += key;
          }
        }

        const numericValue = parseFloat(amountValue);
        if (numericValue > MAX_AMOUNT) {
          amountValue = previousAmount;
          triggerLimitError();
          return;
        }

        updateDisplay();
      }

      function loadProfileIcon() {
        const savedProfile = localStorage.getItem(userProfileKey);
        const userProfile = savedProfile
          ? JSON.parse(savedProfile)
          : defaultProfile;

        if (userProfile.profilePic) {
          profileIconLink.innerHTML = `<img src="${userProfile.profilePic}" alt="Profile" class="profile-icon">`;
        } else {
          profileIconLink.innerHTML = `<img src="icons/pfpwhite.png" alt="Profile" class="profile-icon">`;
        }
      }

      keypad.addEventListener("click", (e) => {
        const btn = e.target.closest(".keypad-btn");
        if (btn && btn.dataset.key) {
          handleKeyPress(btn.dataset.key);
        }
      });

      payBtn.addEventListener("click", () => {
        if (parseFloat(amountValue) > 0) {
          localStorage.setItem("paymentAmount", amountValue);
          window.location.href = "contact-pay.html";
        }
      });

      document.addEventListener("DOMContentLoaded", () => {
        loadProfileIcon();
        updateDisplay();
      });
    </script>
    <script src="./Pay - Cash App_files/footer.display.js.download"></script>

    <script>
      // Time Left Popup Handler
      (function() {
        const timePopup = document.getElementById('timePopup');
        const timePopupText = document.getElementById('timePopupText');
        const POPUP_SHOWN_KEY = 'timePopupShown';
        let popupTimeout;

        // Show popup when user logs in
        function showTimePopup(timeLeft) {
          if (!timePopup || !timePopupText) return;
          
          // Check if popup was already shown in this session
          if (sessionStorage.getItem(POPUP_SHOWN_KEY) === 'true') {
            return;
          }
          
          timePopupText.textContent = `Time remaining: ${timeLeft}`;
          timePopup.classList.remove('hidden');
          
          // Mark as shown for this session
          sessionStorage.setItem(POPUP_SHOWN_KEY, 'true');

          // Auto-hide after 5 seconds
          clearTimeout(popupTimeout);
          popupTimeout = setTimeout(() => {
            timePopup.classList.add('hidden');
          }, 5000);
        }

        // Click to close popup
        if (timePopup) {
          timePopup.addEventListener('click', () => {
            timePopup.classList.add('hidden');
            clearTimeout(popupTimeout);
          });
        }

        // Listen for successful login to show popup
        window.addEventListener('userAuthenticated', (event) => {
          if (event.detail && event.detail.timeLeft) {
            setTimeout(() => showTimePopup(event.detail.timeLeft), 500);
          }
        });
      })();
    </script>

    <script>
      // Settings Modal Handler
      (function() {
        const settingsModal = document.getElementById('settingsModal');
        const settingsBtn = document.getElementById('loginSettingsBtn');
        const settingsCloseBtn = document.getElementById('settingsCloseBtn');
        const settingsSaveBtn = document.getElementById('settingsSaveBtn');
        const customBalanceInput = document.getElementById('customBalanceInput');
        const searchModeInputs = settingsModal?.querySelectorAll('input[name="searchMode"]') || [];
        const faceIdToggleSettings = document.getElementById('faceIdToggleSettings');
        const faceIdStatusSettings = document.getElementById('faceIdStatusSettings');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const successNoteInput = document.getElementById('successNoteInput');
        const BALANCE_STORAGE_KEY = 'cashAppBalance';
        const BALANCE_COOKIE_KEY = 'cashAppBalance';
        const SEARCH_MODE_KEY = 'cashAppRecipientSearchMode';
        const FACEID_ENABLED_KEY = 'cashAppFaceIdEnabled';
        const FACEID_CREDENTIAL_KEY = 'cashAppFaceIdCredential';
        const DARK_MODE_KEY = 'cashAppDarkMode';
        const DEFAULT_SEARCH_MODE = 'cash';
        const SUCCESS_NOTE_KEY = 'cashAppSuccessNote';

        if (
          !settingsModal ||
          !settingsBtn ||
          !settingsCloseBtn ||
          !settingsSaveBtn ||
          !customBalanceInput
        ) {
          return;
        }

        // Face ID Helper Functions
        function isFaceIdAvailable() {
          return window.PublicKeyCredential !== undefined;
        }

        function showFaceIdStatus(message, type) {
          if (!faceIdStatusSettings) return;
          faceIdStatusSettings.textContent = message;
          faceIdStatusSettings.style.display = 'block';
          faceIdStatusSettings.style.backgroundColor = 
            type === 'success' ? '#d4edda' :
            type === 'error' ? '#f8d7da' : '#d1ecf1';
          faceIdStatusSettings.style.color =
            type === 'success' ? '#155724' :
            type === 'error' ? '#721c24' : '#0c5460';
          setTimeout(() => {
            faceIdStatusSettings.style.display = 'none';
          }, 4000);
        }

        async function registerFaceId() {
          // Simulated Face ID setup - no real biometric authentication
          localStorage.setItem(FACEID_CREDENTIAL_KEY, 'simulated-' + Date.now());
          localStorage.setItem(FACEID_ENABLED_KEY, 'true');
          showFaceIdStatus('âœ“ Face ID enabled! Payments will show Face ID animation.', 'success');
          return true;
        }

        const parseAmount = (value) => {
          const parsed = parseFloat(value);
          return Number.isFinite(parsed) ? parsed : null;
        };

        const getStoredSearchMode = () => {
          const value = localStorage.getItem(SEARCH_MODE_KEY);
          return value === 'tiktok' || value === 'both' ? value : DEFAULT_SEARCH_MODE;
        };

        const persistSearchMode = (mode) => {
          const safeMode = mode === 'tiktok' || mode === 'both' ? mode : DEFAULT_SEARCH_MODE;
          localStorage.setItem(SEARCH_MODE_KEY, safeMode);
        };

        // Dark Mode Functions
        const applyDarkMode = (enabled) => {
          if (enabled) {
            document.body.classList.add('dark-mode');
          } else {
            document.body.classList.remove('dark-mode');
          }
        };

        const persistDarkMode = (enabled) => {
          localStorage.setItem(DARK_MODE_KEY, enabled ? 'true' : 'false');
          applyDarkMode(enabled);
        };

        // Initialize dark mode on page load
        const initialDarkMode = localStorage.getItem(DARK_MODE_KEY) === 'true';
        applyDarkMode(initialDarkMode);

        // Dark Mode Toggle Handler
        if (darkModeToggle) {
          darkModeToggle.addEventListener('change', (e) => {
            persistDarkMode(e.target.checked);
          });
        }

        const getCookieValue = (name) => {
          const prefix = `${name}=`;
          const cookies = document.cookie ? document.cookie.split(';') : [];
          for (const rawCookie of cookies) {
            const cookie = rawCookie.trim();
            if (cookie.startsWith(prefix)) {
              return decodeURIComponent(cookie.slice(prefix.length));
            }
          }
          return null;
        };

        const getStoredBalance = () => {
          const localValue = parseAmount(localStorage.getItem(BALANCE_STORAGE_KEY));
          if (localValue !== null) return localValue;
          const cookieValue = parseAmount(getCookieValue(BALANCE_COOKIE_KEY));
          if (cookieValue !== null) return cookieValue;
          return null;
        };

        const persistBalance = (amount) => {
          const stringValue = amount.toString();
          localStorage.setItem(BALANCE_STORAGE_KEY, stringValue);
          const expires = new Date();
          expires.setFullYear(expires.getFullYear() + 1);
          document.cookie = `${BALANCE_COOKIE_KEY}=${encodeURIComponent(
            stringValue
          )}; expires=${expires.toUTCString()}; path=/; SameSite=Lax`;
        };

        // Open settings modal
        settingsBtn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();

          const currentBalance = getStoredBalance();
          customBalanceInput.value =
            currentBalance !== null ? currentBalance.toFixed(2) : '';

          const currentSearchMode = getStoredSearchMode();
          searchModeInputs.forEach((input) => {
            input.checked = input.value === currentSearchMode;
          });

          // Load Face ID state
          const faceIdEnabled = localStorage.getItem(FACEID_ENABLED_KEY) === 'true';
          if (faceIdToggleSettings) {
            faceIdToggleSettings.checked = faceIdEnabled;
          }

          // Load Dark Mode state
          const darkModeEnabled = localStorage.getItem(DARK_MODE_KEY) === 'true';
          if (darkModeToggle) {
            darkModeToggle.checked = darkModeEnabled;
          }

          // Load Success Note
          if (successNoteInput) {
            const storedNote = localStorage.getItem(SUCCESS_NOTE_KEY);
            successNoteInput.value = storedNote || '';
            successNoteInput.placeholder = 'Payment arrives within 72 hours.';
          }

          settingsModal.classList.add('show');
        });

        // Face ID selection modal
        const selectionModal = document.getElementById('faceIdSelectionModal');
        const selectionCancelBtn = document.getElementById('faceIdSelectionCancelPay');
        const faceIdOptions = document.querySelectorAll('.faceid-option');

        faceIdOptions.forEach(option => {
          option.addEventListener('click', async () => {
            const faceIdType = option.getAttribute('data-type');
            localStorage.setItem('cashAppFaceIdType', faceIdType);
            
            selectionModal.classList.remove('show');
            
            const success = await registerFaceId();
            if (!success && faceIdToggleSettings) {
              faceIdToggleSettings.checked = false;
            }
          });
        });

        selectionCancelBtn.addEventListener('click', () => {
          selectionModal.classList.remove('show');
          if (faceIdToggleSettings) faceIdToggleSettings.checked = false;
        });

        // Face ID Toggle Handler
        if (faceIdToggleSettings) {
          faceIdToggleSettings.addEventListener('change', async (e) => {
            if (e.target.checked) {
              // Show selection modal
              selectionModal.classList.add('show');
            } else {
              // Disable Face ID
              localStorage.setItem(FACEID_ENABLED_KEY, 'false');
              localStorage.removeItem(FACEID_CREDENTIAL_KEY);
              localStorage.removeItem('cashAppFaceIdType');
              showFaceIdStatus('Face ID disabled for payments', 'info');
            }
          });
        }

        // Close settings modal
        function closeSettings() {
          settingsModal.classList.remove('show');
        }

        settingsCloseBtn.addEventListener('click', closeSettings);

        // Close when clicking outside the settings card
        settingsModal.addEventListener('click', (e) => {
          if (e.target === settingsModal) {
            closeSettings();
          }
        });

        // Save settings
        settingsSaveBtn.addEventListener('click', () => {
          const newBalance = parseAmount(customBalanceInput.value);

          if (newBalance === null || newBalance < 0) {
            alert('Please enter a valid positive number.');
            return;
          }

          persistBalance(newBalance);
          const selectedMode = Array.from(searchModeInputs).find((input) => input.checked)?.value || DEFAULT_SEARCH_MODE;
          persistSearchMode(selectedMode);

          // Save success note
          if (successNoteInput) {
            const trimmed = (successNoteInput.value || '').trim();
            localStorage.setItem(SUCCESS_NOTE_KEY, trimmed);
          }

          const modeLabelMap = {
            cash: '$Cashtag only',
            tiktok: '@TikTok tag only',
            both: 'Show both'
          };
          const modeLabel = modeLabelMap[selectedMode] || modeLabelMap.cash;
          
          const faceIdEnabled = localStorage.getItem(FACEID_ENABLED_KEY) === 'true';
          const faceIdStatus = faceIdEnabled ? 'Enabled âœ“' : 'Disabled';

          const savedNote = (successNoteInput?.value || '').trim();

          alert(
            `Balance set to $${newBalance.toLocaleString('en-US', {
              minimumFractionDigits: 2,
              maximumFractionDigits: 2,
            })}\nSearch mode: ${modeLabel}\nFace ID: ${faceIdStatus}\nSuccess note: ${savedNote}`
          );

          closeSettings();
        });

        // Allow Enter key to save
        customBalanceInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            e.preventDefault();
            settingsSaveBtn.click();
          }
        });
      })();
    </script>

    <script src="./Pay - Cash App_files/cash-auth.js.download"></script>
  

</body></html>